!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.whatstpl=e():t.whatstpl=e()}(this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.w={},n(n.s=7)}([function(t,e,n){"use strict";function i(t){if("/"==t)return t;var n=t.replace(/\\/g,"/").lastIndexOf("/");return n<0||"/"==t?".":n==t.length-1?i(t.substring(0,n)):t.substring(0,n).replace(/\/|\\/g,e.Separator)}function r(t,e){void 0===e&&(e="");var n=i(t),r="."==n&&null==t.match(/^\.[\/\\]/)?t:t.substring(n.length+1);if(e){var o=r.lastIndexOf(e);r=o>=0?r.substring(0,o):r}return r}function o(t){for(var n=t.split(/\/|\\/),i=0;i<n.length;i++)".."==n[i]?(n.splice(i-1,2),i-=2):"."==n[i]&&(n.splice(i,1),i-=1);return n.join(e.Separator)}function s(){return e.IsBrowser?location.protocol+"//"+location.host+i(location.pathname):process.cwd()}function a(t){return"/"==t[0]||/^[a-zA-Z]:[\/\\]/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.IsBrowser="object"==typeof window&&"function"==typeof XMLHttpRequest,e.Separator=e.IsBrowser?"/":"win32"==process.platform?"\\":"/",e.escape=function(t){return String(t).replace(/<\/?[^>]*>/g,"")},e.dirname=i,e.basename=r,e.extname=function(t){var e=r(t),n=e.lastIndexOf(".");return n>=0?e.substring(n):""},e.normalizePath=o,e.getCwd=s,e.isAbsPath=a,e.getAbsPath=function(t){if(!a(t)){var n=s();t=n+("/"==n[n.length-1]?"":e.Separator)+t}return o(t)},e.getObjectValues=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},e.getFunctionBodyOffset=function(t){var e=t.toString(),n=e.indexOf("{")+1,i=e.slice(0,n).split("\n"),r="\n"==e[n],o=r?0:i[i.length-1].indexOf("{")+2;return{line:r?i.length:i.length-1,column:o}}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.filename=n,o.line=i,o.column=r,o}return r(e,t),e}(SyntaxError);e.UnclosedTagError=o},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(1)),i(n(6)),i(n(0))},function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=function(){function t(t){this.children={},this.sourceMap={},this.id=this.filename=i.normalizePath(t),this.dirname=i.dirname(t),this.code=""}return t.prototype.require=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r="");var s=i.isAbsPath(e)||"."==this.dirname?e:i.normalizePath(this.dirname+"/"+e),a=i.dirname(s);if(t.cache[s]){var u=t.cache[s],c={default:""};this.children[s]=u;var l=function(t,e,n){var i=Object.keys(n).join(", ");try{return new Function(o+(i?", "+i:""),e)}catch(e){if(e instanceof SyntaxError){if(t&&"undefined"!==t){var r=e.stack.split("\n");r[1]=r[1].replace(/<anonymous>|Function \(native\)/,t),e.stack=r.join("\n")}throw e}throw h(e,t)}}(this.filename,u.code,n);return l.call.apply(l,[c,function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=""),u.require(t,e,n)},s,a,r,n,i.escape].concat(i.getObjectValues(n))),c}throw new Error("the request module hasn't been imported!")},t.cache={},t.sourceMaps={},t}();e.Module=r;var o="require, __filename, __dirname, __contents, __locals, __escape",s=/at ([a-zA-Z0-9_\.]+) \(eval at.+<anonymous>:(\d+:\d+)\)/,a=/const __module_\d+ = require\('(.+?)'/,u=/([a-zA-Z0-9_]+).call\(this.*\)/,c=i.getFunctionBodyOffset(new Function("a, b","a + b"));function l(t,e){var n,i,r=t.split("\n"),o=function(t){var e=t.match(u);return e?e[1]:""}(r[e-1]);if(!o)return(i=(n=r[e-1])&&n.match(a))?i[1].replace(/\\\\/g,"\\"):"";var s=new RegExp("const "+o+" = (__module_\\d+)."),c=void 0,l=void 0;for(var h in r)if(i=r[h].match(s)){c=r.slice(0,parseInt(h)),l=i[1];break}if(!(l&&c&&c.length))return"";c.reverse();for(var f=new RegExp("const "+l+" = require\\('(.+?)'"),p=0,d=c;p<d.length;p++){if(i=d[p].match(f))return i[1].replace(/\\\\/g,"\\")}}function h(t,e){var n=t.stack.split("\n").reverse();for(var i in n)if(" "==n[i][0]&&e){var o=n[i].match(s);if(o){var a=o[1],u=o[2].split(":"),h=parseInt(u[0]),f=parseInt(u[1]),p={funcName:a,filename:e,line:h-c.line,column:f},d=r.sourceMaps[e][p.line],v=r.cache[e].code;1==p.line&&(p.column=f-c.column),e=l(v,p.line),p.line=d.node.line,p.column=f-d.column+d.node.column,n[i]="    at "+p.funcName+" ("+p.filename+":"+p.line+":"+p.column+")"}}return n.reverse(),t.stack=n.join("\n"),t}e.replaceError=h},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(a[c]=n[c]);if(i){s=i(n);for(var l=0;l<s.length;l++)o.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(0),o=/([0-9a-zA-Z:\-]+)\s*=\s*|([0-9a-zA-Z:\-]+)\s*/,s=function(){function t(e){void 0===e&&(e="");var n=this;this.listeners={},this.outputTags=t.OutputTags,this.blockTags=t.BlockTags,this.filename=e?r.getAbsPath(e):"undefined",this.renewRegExp(),this.on("block",function(t){var e=t.attributes;if("block"==t.tag)n.blockTags.push(e.name.value),n.renewRegExp();else if("import"==t.tag&&e.target&&e.target.value){var i=e.target.value.split(/,\s*/);for(var r in i){var o=i[r].split(/\s+as\s+/);i[r]=o[1]||o[0]}n.blockTags=n.blockTags.concat(i),n.renewRegExp()}})}return t.prototype.renewRegExp=function(){var t=this.blockTags.join("|"),e="\x3c!--(.*?)--\x3e|\x3c!--(.*)|("+this.outputTags.join("|")+"){(.+?)}|<("+t+")[\\s|\\/|>]|<\\/("+t+")>";this.regexp=new RegExp(e)},t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this.listeners[t]||!this.listeners[t].length)return!1;for(var i=0,r=this.listeners[t];i<r.length;i++){r[i].apply(void 0,e)}return!0},t.prototype.parse=function(t){var e={tag:"root",type:"root",line:1,column:1,contents:[],closed:!1};return this.html=t.trimRight().replace(/\r\n|\r/g,"\n"),this.parseHtml(this.html,1,1,e),e},t.prototype.getLine=function(t,e){for(var n,i;;){var r=t.indexOf("\n");if(n=(r>=0?t.substring(0,r):t).trimRight(),i=r>=0?t.substring(r+1):"",n||!i)break;e+=1,t=i}return{lineStr:n,left:i,line:e}},t.prototype.attachTextNode=function(t,e,n,i,r,o){void 0===o&&(o=!1);var s={type:"text",line:e,column:n,contents:i?t.substring(0,i):t+"\n",closed:!0};(o||s.contents.trimLeft())&&(r.push(s),this.emit("text",s))},t.prototype.parseHtml=function(e,n,r,o){void 0===r&&(r=1);var s=this.getLine(e,n),a=s.lineStr,u=a.match(this.regexp),c=o.contents;if(e=s.left,n=s.line,u)if(u[1]&&"script"!=o.tag){u.index&&(this.attachTextNode(a,n,r,u.index,c),r+=u.index);var l=a.substring(u.index+u[0].length),h={type:"comment",line:n,column:r,contents:u[0],closed:!1};c.push(h),this.emit("comment",h),l?(e=l+"\n"+e,r+=u[0].length):(h.contents+="\n",n+=1,r=1)}else if(u[2]&&"script"!=o.tag){u.index&&(this.attachTextNode(a,n,r,u.index,c),r+=u.index);h={type:"comment",line:n,column:r,contents:a.substring(u.index),closed:!1};n+=1,r=1;var f=this.parseComment(e,n,r,h);c.push(h),this.emit("comment",h),e=f.left,n=f.line,r=f.column}else if(u[3]&&u[4]){u.index&&(this.attachTextNode(a,n,r,u.index,c,"!"!=u[3]),r+=u.index),r+=2;var p={tag:u[3],type:"var",line:n,column:r,contents:u[4],closed:!0};c.push(p),this.emit("var",p);var d=u.index+u[4].length+3;(l=a.substring(d)).trimRight()?(e=l+(e?"\n"+e:""),r+=u[4].length+1):(n+=1,r=1)}else if(u[5]&&"script"!=o.tag){u.index&&(this.attachTextNode(a,n,r,u.index,c),r+=u.index);var v=a[(d=u.index+u[0].length)-1],m="/"==v||">"==v,g={tag:u[5],type:"block",line:n,column:r,attributes:{},contents:[],closed:!1};if(m&&(d-=1),!(l=a.substring(d))&&e){r=1;var b=this.getLine(e,n);b.lineStr&&(l=b.lineStr,e=b.left)}if(!l)throw new i.UnclosedTagError("unclosed tag",this.filename,n,r);e=l+(e?"\n"+e:""),r+=u[0].length,m&&(r-=1);f=this.applyAttr(e,n,r,g.attributes);g.closed=f.blockClosed,f.left&&!g.closed&&(f=this.parseHtml(f.left,f.line,f.column,g)),c.push(g),this.emit("block",g),e=f.left,n=f.line,r=f.column}else if(u[6]&&u[6]==o.tag){u.index&&"script"!=o.tag&&this.attachTextNode(a,n,r,u.index,c),o.closed=!0;d=u.index+u[0].length;(l=a.substring(d))?(e=l+(e?"\n"+e:""),r+=d):(n+=1,r=1)}else this.attachTextNode(a,n,r,NaN,c),n+=1,r=1;else{if("script"==o.tag&&o.attributes.engine&&o.attributes.engine.value==t.EngineName){var y={type:"snippet",line:n,column:r,contents:a+"\n",closed:!0};c.push(y),this.emit("snippet",y)}else this.attachTextNode(a,n,r,NaN,c);n+=1,r=1}return e&&!o.closed?this.parseHtml(e,n,r,o):(o.closed=!0,{line:n,column:r,left:e})},t.prototype.applyAttr=function(t,e,n,r){var s,a,u=this.getLine(t,e),c=u.lineStr,l=c.trimLeft()[0],h="/"==l||">"==l?null:c.match(o);if(e=u.line,t=u.left,!h){var f=c.indexOf(">");if(-1===f)throw new i.UnclosedTagError("unclosed tag",this.filename,e,n);n+=f+1;var p=c.substring(f+1);return p?t=p+"\n"+t:(e+=1,n=1),{line:e,column:n,left:t,blockClosed:"/"==l}}var d,v=!0;if(h[1]){var m=h.index+h[0].length,g=c[m],b=void 0;(v="'"==g||'"'==g)&&(m+=1),v?b=c.indexOf(g,m):-1===(b=c.indexOf("/",m))&&(b=c.indexOf(">",m)),s=h[1],a=-1===b?"":c.substring(m,b),d=c.substring(b+1),n+=m}else h[2]&&(s=a=h[2].trim(),d=c.substring(h.index+h[0].length),n+=h.index);return r[s]={name:s,value:a,line:e,column:n},d?(t=d+"\n"+t,n+=h[1]?a.length:h[0].length,n+=v?1:0):(e+=1,n=1),this.applyAttr(t,e,n,r)},t.prototype.parseComment=function(t,e,n,i){var r=this.getLine(t,e),o=r.lineStr,s=o&&o.match(/-->/);if(e=r.line,t=r.left,o&&(i.contents+="\n"),!s)return i.contents+=o,e+=1,n=1,t?this.parseComment(t,e,n,i):{line:e,column:n,left:t};s.index&&(i.contents+=o.substring(0,s.index)),i.contents+=s[0],i.closed=!0,n+=s.index+3;var a=o.substring(n);return a?t=a+"\n"+t:(e+=1,n=1),{line:e,column:n,left:t}},t.EngineName="whatstpl",t.BlockTags=["layout","import","export","block","if","else-if","else","switch","case","default","for","while","do","continue","break","script"],t.OutputTags=["!","@","#"],t}();e.Parser=s},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(5),a=n(4),u=null;o.IsBrowser||(u=n(3)),e.CompileOption={encoding:"utf8",cache:!1,removeComments:!1,timeout:5e3,withCredentials:!1,headers:null};var c=function(){function t(t,n){void 0===t&&(t=""),void 0===n&&(n="utf8"),this.currentLine=0,this.importedModuleCount=0,this.layouts=[],this.filename=t?o.getAbsPath(t):"undefined","string"==typeof n&&(n={encoding:n}),this.options=s({},e.CompileOption,n)}return t.prototype.render=function(t,e){return void 0===e&&(e={}),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,this.compile(t)];case 1:return[2,n.sent()(e)]}})})},t.renderFile=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,this.compileFile(t,n)];case 1:return[2,i.sent()(e||{})]}})})},t.prototype.compile=function(e){return i(this,void 0,void 0,function(){var n,i,s,u,c=this;return r(this,function(r){switch(r.label){case 0:return this.options.cache&&t.cache[this.filename]?[2,t.cache[this.filename]]:(n=new o.Parser(this.filename),i=n.parse(e),[4,this.createModule(i)]);case 1:return s=r.sent(),u=function(t){void 0===t&&(t={});try{return s.require(c.filename,t).default.trimRight()}catch(t){throw a.replaceError(t,c.filename)}},this.options.cache&&(t.cache[this.filename]=u),[2,u]}})})},t.compileFile=function(e,n){return void 0===n&&(n=null),i(this,void 0,void 0,function(){var i,s;return r(this,function(r){switch(r.label){case 0:return e=o.getAbsPath(e),n&&n.cache&&t.cache[e]?[2,t.cache[e]]:[4,(i=new this(e,n)).loadTemplate()];case 1:return s=r.sent(),[2,i.compile(s)]}})})},t.register=function(t,e){return new this(t,{cache:!0}).compile(e)},t.prototype.loadTemplate=function(){var t=this;return o.IsBrowser?new Promise(function(e,n){var i=new XMLHttpRequest;if(i.timeout=t.options.timeout,i.withCredentials=t.options.withCredentials,i.open("GET",t.filename,!0),t.options.headers)for(var r in t.options.headers){var o=t.options.headers[r];Array.isArray(o)?o=o.join(", "):"string"!=typeof o&&(o="function"==typeof o.toString?o.toString():String(o)),i.setRequestHeader(r,o)}i.onload=function(){e(i.responseText)},i.onabort=i.onerror=i.ontimeout=function(){n(new Error("failed to load remote module."))},i.send()}):new Promise(function(e,n){u.readFile(t.filename,t.options.encoding,function(t,i){t?n(t):e(i)})})},t.prototype.getAbsPath=function(t){if(!o.isAbsPath(t)){var e=this.filename&&"undefined"!=this.filename?o.dirname(this.filename):o.getCwd();t=o.normalizePath(e+o.Separator+t)}return o.extname(t)||(t+=o.extname(this.filename)),t},t.prototype.addSourceMap=function(t,e){this.currentLine+=1,this.module.sourceMap[this.currentLine]={column:t,node:e}},t.prototype.pushCode=function(t,e,n,i,r){void 0===r&&(r=!0),this.module.code+=t+e+n+(r?"\n":""),this.addSourceMap(t.length+1,i)},t.prototype.importModule=function(t){return void 0===t&&(t=null),i(this,void 0,void 0,function(){var e,n,i;return r(this,function(r){switch(r.label){case 0:return a.Module.cache[this.filename]?[2,a.Module.cache[this.filename]]:[4,this.loadTemplate()];case 1:return e=r.sent(),n=new o.Parser(this.filename),i=n.parse(e),[2,this.createModule(i,t)]}})})},t.prototype.createModule=function(t,e){return void 0===e&&(e=null),i(this,void 0,void 0,function(){var n,i,o,s,u,c,l;return r(this,function(r){switch(r.label){case 0:return n=new a.Module(this.filename),this.module=n,[4,this.attachBlockContents(t)];case 1:if(r.sent(),this.layouts.length)for(i=0,o=this.layouts;i<o.length;i++)s=o[i],u=s.filename,c=s.node,this.importedModuleCount+=1,l="__module_"+this.importedModuleCount,u=u.replace(/\\/g,"\\\\"),this.pushCode("const "+l+" = ","require('"+u+"', __locals, this.default)",";",c),this.pushCode("this.default = ",l+".default",";",c);return n.parent=e,a.Module.cache[this.filename]=n,a.Module.sourceMaps[this.filename]=n.sourceMap,[2,n]}})})},t.prototype.attachBlockContents=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){var n,i,s,a,u,c,l,h,f;return r(this,function(r){switch(r.label){case 0:n=NaN,i=0,s=t.contents,r.label=1;case 1:return i<s.length?"text"==(a=s[i]).type||"comment"==a.type&&!this.options.removeComments?(f=a.contents.replace(/\n/g,"\\n").replace(/'/g,"\\'"),this.pushCode(e+"this.default += '",f,"';",a),[3,34]):[3,2]:[3,35];case 2:return"var"!=a.type?[3,3]:("!"==a.tag?this.pushCode(e,a.contents,";",a):"@"==a.tag?this.pushCode(e+"this.default += ",a.contents,";",a):this.pushCode(e+"this.default += __escape(",a.contents,");",a),[3,34]);case 3:return"snippet"!=a.type?[3,4]:(f=n?a.contents.substring(n):a.contents,this.pushCode(e.substring(4),f,"",a,!1),[3,34]);case 4:return"block"!=a.type?[3,34]:"import"!=a.tag?[3,6]:[4,this.attachImport(a,e)];case 5:return r.sent(),[3,34];case 6:return"export"!=a.tag?[3,8]:[4,this.attachExport(a,e)];case 7:return r.sent(),[3,34];case 8:return"block"!=a.tag?[3,10]:[4,this.attackBlock(a,e)];case 9:return r.sent(),[3,34];case 10:return"if"!=a.tag?[3,12]:[4,this.attachIf(a,e)];case 11:return r.sent(),[3,34];case 12:return"else-if"!=a.tag?[3,14]:[4,this.attachElseIf(a,e.substring(4))];case 13:return r.sent(),[3,34];case 14:return"else"!=a.tag?[3,16]:[4,this.attachElse(a,e.substring(4))];case 15:return r.sent(),[3,34];case 16:return"switch"!=a.tag?[3,18]:[4,this.attachSwitch(a,e)];case 17:return r.sent(),[3,34];case 18:return"case"!=a.tag?[3,20]:[4,this.attachCase(a,e)];case 19:return r.sent(),[3,34];case 20:return"default"!=a.tag?[3,22]:[4,this.attachDefault(a,e)];case 21:return r.sent(),[3,34];case 22:return"for"!=a.tag?[3,24]:[4,this.attachFor(a,e)];case 23:return r.sent(),[3,34];case 24:return"while"!=a.tag?[3,26]:[4,this.attachWhile(a,e)];case 25:return r.sent(),[3,34];case 26:return"do"!=a.tag?[3,28]:[4,this.attachDoWhile(a,e)];case 27:return r.sent(),[3,34];case 28:return"continue"!=a.tag&&"break"!=a.tag?[3,29]:(this.pushCode(e,a.tag,";",a),[3,34]);case 29:return"layout"!=a.tag?[3,31]:[4,this.attachLayout(a)];case 30:return r.sent(),[3,34];case 31:if("script"!=a.tag)return[3,33];if(h=a.attributes,u=!h.engine||h.engine.value!=o.Parser.EngineName){for(c in f="<script",h)f+=" "+c+'="'+h[c].value+'"';f+=">\\n",this.pushCode(e+"this.default += '",f,"';",a)}return[4,this.attachBlockContents(a,e+"    ")];case 32:return r.sent(),u&&this.pushCode(e+"this.default += '","<\/script>\\n","';",a),[3,34];case 33:l=a.tag.replace(/-/g,"_"),(h=a.attributes).await&&"false"!=h.await.value&&(l="await "+l),f="call(this",h.data&&h.data.value&&(f+=", "+h.data.value),f+=")",this.pushCode(e+l+".",f,";",a),r.label=34;case 34:return i++,[3,1];case 35:return[2]}})})},t.prototype.attachLayout=function(t){return i(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return e=this.getAbsPath(t.attributes.file.value),[4,new this.constructor(e,this.options).importModule(this.module)];case 1:return n.sent(),this.layouts.push({filename:e,node:t}),[2]}})})},t.prototype.attachImport=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){var n,i,o,s,a,u,c,l,h,f;return r(this,function(r){switch(r.label){case 0:return n=t.attributes,i=this.getAbsPath(n.from?n.from.value:n.file.value),[4,new this.constructor(i,this.options).importModule(this.module)];case 1:if(r.sent(),this.importedModuleCount+=1,o="__module_"+this.importedModuleCount,i=i.replace(/\\/g,"\\\\"),this.pushCode(e+"const "+o+" = ","require('"+i+"', __locals)",";",t),n.target&&n.target.value)for(s=n.target.value.replace(/-/g,"_").split(/\s*,\s*/),a=0,u=s;a<u.length;a++)c=u[a],l=c.split(/\s*as\s*/),h=l[0],f=l[1]||h,this.pushCode(e,"const "+f+" = "+o+"."+h,";",t);else this.pushCode(e,"this.default += "+o+".default",";",t);return[2]}})})},t.prototype.attachExport=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){var n,i,o,s,a;return r(this,function(r){if(t.attributes.target&&t.attributes.target.value)for(i in n=t.attributes.target.value.split(/,\s*/))o=n[i].split(/\s+as\s+/),s=o[0].replace(/-/g,"_"),a=o[1]?o[1].replace(/-/g,"_"):s,this.pushCode(e,"this."+a+" = "+s,";",t);return[2]})})},t.prototype.attackBlock=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){var n,i,o;return r(this,function(r){switch(r.label){case 0:return n=t.attributes,i=n.name.value.replace(/-/g,"_"),o="function "+i+"(",n.async&&"false"!=n.async.value&&(o="async "+o),n.params&&n.params.value&&(o+=n.params.value),o+=")",this.pushCode(e,o," {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return r.sent(),this.pushCode(e,"","}",t),n.export&&"false"!=n.export.value&&this.pushCode(e,"this."+i+" = "+i,";",t),[2]}})})},t.prototype.attachIf=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"if (",t.attributes.condition.value,") {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e,"","}",t),[2]}})})},t.prototype.attachElseIf=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"} else if (",t.attributes.condition.value,") {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),[2]}})})},t.prototype.attachElse=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"} else {","","",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),[2]}})})},t.prototype.attachSwitch=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"switch (",t.attributes.target.value,") {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e,"","}",t),[2]}})})},t.prototype.attachCase=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"case ",t.attributes.data.value,":",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e+"    ","break",";",t),[2]}})})},t.prototype.attachDefault=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"default","",":",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e+"    ","break",";",t),[2]}})})},t.prototype.attachFor=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"for (",t.attributes.statement.value,") {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e,"","}",t),[2]}})})},t.prototype.attachWhile=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"while (",t.attributes.condition.value,") {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e,"","}",t),[2]}})})},t.prototype.attachDoWhile=function(t,e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.pushCode(e+"do ",""," {",t),[4,this.attachBlockContents(t,e+"    ")];case 1:return n.sent(),this.pushCode(e+"} while (",t.attributes.while.value,");",t),[2]}})})},t.cache={},t}();e.Template=c,e.default=c}])});
//# sourceMappingURL=whatstpl.min.js.map